<!DOCTYPE html>
<html lang="ru">
<head>
    <link rel="stylesheet" href="style.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üê∏kva clicker Mini Appüê∏üòé</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a2e, #16213e);
            color: white;
            min-height: 100vh;
            padding: 20px;
            padding-top: 60px; /* –î–ª—è –∫–Ω–æ–ø–∫–∏ Telegram */
        }

        .container {
            max-width: 400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }

        .header h1 {
            font-size: 2em;
            background: linear-gradient(45deg, #FFD700, #8A2BE2);
            -webkit-background--clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }

        .score-container {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
        }

        .score {
            font-size: 3em;
            font-weight: bold;
            color: #FFD700;
            margin: 10px 0;
        }

        .click-button {
            width: 200px;
            height: 200px;
            border: none;
            border-radius: 50%;
            background: linear-gradient(135deg, #8A2BE2, #4B0082);
            color: white;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            margin: 0 auto 20px;
            display: block;
            box-shadow: 0 10px 30px rgba(138, 43, 226, 0.5);
            transition: all 0.2s;
        }

        .click-button:active {
            transform: scale(0.95);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 20px;
        }

        .stat-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .upgrades-section {
            margin-top: 20px;
        }

        .upgrade-btn {
            width: 100%;
            padding: 15px;
            margin: 5px 0;
            border: none;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            cursor: pointer;
            text-align: left;
        }

        .upgrade-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è Telegram Mini App */
        .tg-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 50px;
            background: var(--tg-theme-bg-color, #1a1a2e);
            z-index: 1000;
        }

        /* –ê–¥–∞–ø—Ç–∞—Ü–∏—è –ø–æ–¥ —Ç–µ–º—É Telegram */
        body {
            background: var(--tg-theme-bg-color, #1a1a2e);
            color: var(--tg-theme-text-color, white);
        }
    </style>
</head>
<body>
    <div class="tg-header"></div>
    <div class="container">
        <div class="header">
            <h1>üéÆ üê∏Kva Clicker</h1>
            <p>–ò–≥—Ä–∞–π –ø—Ä—è–º–æ –≤ Telegram!</p>
        </div>

        <div class="score-container">
            <div class="score-label">–í–∞—à —Å—á–µ—Ç:</div>
            <div class="score" id="score">0</div>
        </div>

        <button class="click-button" id="clickButton">
            üëÜ<br>–ö–õ–ò–ö–ê–ô!
        </button>
        <div class="stats-grid">
            <div class="stat-item">
                <span>üí™ –°–∏–ª–∞ –∫–ª–∏–∫–∞:</span>
                <span id="clickPower">1</span>
            </div>
            <div class="stat-item">
                <span>ü§ñ –ê–≤—Ç–æ–∫–ª–∏–∫–µ—Ä:</span>
                <span id="autoClick">0/—Å–µ–∫</span>
            </div>
            <div class="stat-item">
                <span>üéØ –ú–Ω–æ–∂–∏—Ç–µ–ª—å –æ—á–∫–æ–≤:</span>
                <span id="multiplier">x1</span>
            </div>
            <div class="stat-item">
                <span>‚≠ê –ü—Ä–µ—Å—Ç–∏–∂:</span>
                <span id="prestigeLevel">0</span>
            </div>
        </div>

        <div class="upgrades-section">
            <h3>üõ† –£–ª—É—á—à–µ–Ω–∏—è</h3>
            <button class="upgrade-btn" onclick="buyUpgrade('click', 0)">
                üí™ +5 —Å–∏–ª–∞ (10 üíé)
            </button>
            <button class="upgrade-btn" onclick="buyUpgrade('auto', 0)">
                ü§ñ +5/—Å–µ–∫ (50 üíé)
            </button>
            <button class="upgrade-btn" onclick="buyUpgrade('bonus', 0)">
                üéØ x2 –Ω–∞ 30—Å–µ–∫ (200 üíé)
            </button>
        </div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        let tg = window.Telegram.WebApp;
        
        // –†–∞—Å—à–∏—Ä—è–µ–º –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
        tg.expand();
        
        // –ò–≥—Ä–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
        let gameState = {
            score: 0,
            clickPower: 1,
            autoClickPower: 0,
            bonusMultiplier: 1,
            totalClicks: 0,
            prestigeLevel: 0
        };

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π –∏–∑ localStorage
        function loadGame() {
            const saved = localStorage.getItem('tgClickerSave');
            if (saved) {
                Object.assign(gameState, JSON.parse(saved));
            }
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–≥—Ä—ã
        function saveGame() {
            localStorage.setItem('tgClickerSave', JSON.stringify(gameState));
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
        function updateDisplay() {
            document.getElementById('score').textContent = formatNumber(gameState.score);
            document.getElementById('clickPower').textContent = gameState.clickPower;
            document.getElementById('autoClick').textContent = gameState.autoClickPower + '/—Å–µ–∫';
            document.getElementById('multiplier').textContent = 'x' + gameState.bonusMultiplier;
            document.getElementById('prestigeLevel').textContent = gameState.prestigeLevel;
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∫–ª–∏–∫–∞
        document.getElementById('clickButton').addEventListener('click', function() {
            gameState.score += gameState.clickPower * gameState.bonusMultiplier;
            gameState.totalClicks++;
            
            // –ê–Ω–∏–º–∞—Ü–∏—è –∫–ª–∏–∫–∞
            this.style.transform = 'scale(0.95)';
            setTimeout(() => {
                this.style.transform = 'scale(1)';
            }, 100);
            
            updateDisplay();
            saveGame();
        });

        // –ü–æ–∫—É–ø–∫–∞ —É–ª—É—á—à–µ–Ω–∏–π
        function buyUpgrade(type, index) {
            const upgrades = {
                click: [{ cost: 10, power: 1 }],
                auto: [{ cost: 50, power: 1 }],
                bonus: [{ cost: 200, multiplier: 2, duration: 30 }]
            };
            
            const upgrade = upgrades[type][index];
            
            if (gameState.score >= upgrade.cost) {
                gameState.score -= upgrade.cost;
                
                if (type === 'click') {
                    gameState.clickPower += upgrade.power;
                } else if (type === 'auto') {
                    gameState.autoClickPower += upgrade.power;
                } else if (type === 'bonus') {
                    activateBonus(upgrade.multiplier, upgrade.duration);
                }
                
                // –í–∏–±—Ä–∞—Ü–∏—è (–µ—Å–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è)
                if (navigator.vibrate) {
                    navigator.vibrate(50);
                }
                
                updateDisplay();
                saveGame();
            }
        }
        // –ê–∫—Ç–∏–≤–∞—Ü–∏—è –±–æ–Ω—É—Å–∞
        function activateBonus(multiplier, duration) {
            gameState.bonusMultiplier = multiplier;
            
            setTimeout(() => {
                gameState.bonusMultiplier = 1;
                updateDisplay();
            }, duration * 1000);
        }

        // –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∏—Å–µ–ª
        function formatNumber(num) {
            if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
            if (num >= 1000) return (num / 1000).toFixed(1) + 'K';
            return num;
        }

        // –ê–≤—Ç–æ-–∫–ª–∏–∫–µ—Ä
        setInterval(() => {
            if (gameState.autoClickPower > 0) {
                gameState.score += gameState.autoClickPower * gameState.bonusMultiplier;
                updateDisplay();
                saveGame();
            }
        }, 1000);

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–≥—Ä—ã
        loadGame();
        updateDisplay();

        // –ö–Ω–æ–ø–∫–∞ "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è" –≤ Telegram
        tg.MainButton.setText("–ü–û–î–ï–õ–ò–¢–¨–°–Ø –ò–ì–†–û–ô");
        tg.MainButton.show();
        tg.MainButton.onClick(function() {
            tg.shareURL("https://t.me/@KvaClickerGameBot?start=clicker", "–ò–≥—Ä–∞–π –≤ üê∏üòékva clickerüê∏ –ö–ª–∏–∫–µ—Ä!");
        });
    </script>
</body>
</html>